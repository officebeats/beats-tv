<header class="app-header glass-header">
  <div class="header-content">
    <div class="left-section hidden">
      <!-- Logo moved to sidebar -->
    </div>

    <div class="center-section">
      <div class="search-container">
        <div class="search-box premium-glass-input">
          <input
            autocomplete="off"
            #searchInput
            type="text"
            class="search-input"
            placeholder="Search channels, movies, series..."
            title="Search"
            aria-label="Search"
          />
          <div class="search-actions">
            <app-sort-button></app-sort-button>
          </div>
        </div>
      </div>
    </div>

    <div class="right-section">
      <div class="selection-status" *ngIf="selectedCount > 0">
        <span class="selection-badge">{{ selectedCount }}</span>
        <button class="btn-clear-selection" (click)="clearSelection.emit()" title="Clear Selection">
          Clear
        </button>
      </div>

      <div class="header-actions">
        <button
          class="action-btn"
          (click)="toggleSelectionMode.emit()"
          [class.active]="selectionMode"
          [ngbTooltip]="'Multi-select Mode'"
          title="Toggle Selection Mode"
          aria-label="Toggle selection mode"
        >
          <app-icon name="check" size="md" aria-hidden="true"></app-icon>
        </button>

        <!-- Quick Focus Manager (Eye + Pencil Icon) -->
        <button
          class="action-btn-stacked"
          (click)="openCategoryManager.emit()"
          [ngbTooltip]="'Manage Library Focus'"
          title="Manage Library Focus"
          aria-label="Manage library focus"
        >
          <div class="icon-stack">
            <app-icon class="icon-main" name="eye" size="md" aria-hidden="true"></app-icon>
            <app-icon class="icon-sub" name="pencil" size="sm" aria-hidden="true"></app-icon>
          </div>
        </button>

        <button
          class="action-btn"
          [matMenuTriggerFor]="bulkMenu"
          [disabled]="bulkDisabled"
          title="Bulk Actions"
          aria-label="Bulk actions"
        >
          <app-icon name="dots-vertical" size="md" aria-hidden="true"></app-icon>
        </button>

        <button class="settings-btn" (click)="openSettings.emit()" title="Settings" aria-label="Settings">
          <app-icon name="settings" size="md" aria-hidden="true"></app-icon>
        </button>
      </div>
    </div>
  </div>
</header>
